<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iSignify - Signature Finder</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header>
        <h1>iSignify: Microbial Signature Finder</h1>
        <p>Upload a target genome and one or more background genomes to find unique DNA signatures.</p>
    </header>

    <main>
        <form id="analysis-form">
            <h2>Analysis Parameters</h2>
            <p class="explanation">Select one genome you want to find unique sequences in (the Target) and one or more genomes to compare it against (the Background). The app will find sequences present in the Target but absent from the Background.</p>
            
            <div class="form-group">
                <label for="kmer-size">k-mer Size:</label>
                <input type="number" id="kmer-size" name="kmer_size" value="20" min="15" required>
            </div>
            
            <div class="form-group">
                <label for="target-genome">Target Genome (.fna, .fa):</label>
                <input type="file" id="target-genome" name="target_genome" accept=".fna,.fa,.fasta" required>
            </div>
            
            <div class="form-group">
                <label for="background-genomes">Background Genomes (select one or more):</label>
                <input type="file" id="background-genomes" name="background_genomes" accept=".fna,.fa,.fasta" required multiple>
            </div>

            <div class="form-group toggle-group">
                <label for="preprocessor-toggle">Automatically Merge Multi-Contig Files:</label>
                <label class="switch">
                    <input type="checkbox" id="preprocessor-toggle" name="run_preprocessor" checked>
                    <span class="slider round"></span>
                </label>
            </div>
            
            <button type="submit" id="submit-button">Find Signatures</button>
        </form> 

        <section id="results-container" class="hidden">
            <h2>Analysis Results</h2>
            <p class="explanation">Below is the AI-generated summary of the findings, followed by a table of the specific DNA signatures that are unique to your target genome.</p>

            <div id="summary"></div>
            
            <button id="download-csv-button" class="hidden">Download Results as CSV</button>

            <pre id="signatures-table"></pre>
        </section>
        
        <div id="loader" class="hidden">
            <p>Analyzing... This may take a moment.</p>
        </div>
    </main>

    <script src="js/app.js"></script>
</body>
</html>